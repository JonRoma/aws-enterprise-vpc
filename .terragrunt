# Terragrunt settings inherited by multiple environments
# (see https://github.com/gruntwork-io/terragrunt#managing-multiple-terragrunt-files)

# Configure Terragrunt to use DynamoDB for locking.
lock = {
  backend = "dynamodb"
  config {
    aws_region = "us-east-2"
    # must be unique to repository + environment
    state_file_id = "Shared Networking/${path_relative_to_include()}"
  }
}

# Configure Terragrunt to automatically store tfstate files in S3.
remote_state = {
  backend = "s3"
  config {
    region = "us-east-2"
    encrypt = "true"
    # S3 bucket names are GLOBALLY unique
    # (http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html).
    # You must specify a bucket that belongs to your AWS account, or one that
    # does not yet exist at all (in which case Terragrunt will automatically
    # create it in your AWS account).  Replacing "uiuc-tech-services-sandbox"
    # with the friendly name of your AWS account will _probably_ work.
    bucket = "terraform.uiuc-tech-services-sandbox.aws.illinois.edu" #FIXME
    # must be unique to repository + environment
    key = "Shared Networking/${path_relative_to_include()}/terraform.tfstate"
  }
}
